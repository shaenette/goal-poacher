{% load static %}
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    {% block meta %} {% endblock meta %}
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Add DOMPurify here -->
    <script src="https://cdn.jsdelivr.net/npm/dompurify@3.0.5/dist/purify.min.js"></script>
    <link rel="stylesheet" href="{% static 'css/global.css' %}"/>
  </head>

  <body>
    {% block content %} 
    
    {% endblock content %}

    {% include 'toast.html' %}
    {% if messages %}
    <div id="django-messages" data-messages='[
        {% for message in messages %}
            {"title": "{{ message.tags|capfirst }}", "text": "{{ message|escapejs }}", "tag": "{{ message.tags }}"}{% if not forloop.last %},{% endif %}
        {% endfor %}
    ]'></div>

    <script>
        const messages = JSON.parse(document.getElementById("django-messages").dataset.messages);
        messages.forEach(msg => showToast(msg.title, msg.text, msg.tag));
    </script>
    {% endif %}  
    {% include 'modal.html' %}
  </body>
  
</html>